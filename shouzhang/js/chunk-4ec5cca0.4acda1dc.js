(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ec5cca0"],{"0ce6":function(t,a,s){},"0cf1":function(t,a,s){},"295c":function(t,a,s){},"3f2f":function(t,a,s){"use strict";s("cc21")},4519:function(t,a,s){"use strict";s("0cf1")},"4e21":function(t,a,s){},"6aef":function(t,a,s){"use strict";s("0ce6")},"7f7f":function(t,a,s){var e=s("86cc").f,n=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in n||s("9e1e")&&e(n,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"93bd":function(t,a,s){"use strict";s("4e21")},a5d8:function(t,a,s){"use strict";s("295c")},bea4:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"all"},[s("real-home-map",{ref:"RHM",staticClass:"coms1",on:{showPois:t.showPois,showWeather:t.showWeather}}),s("HomeHeader",{staticClass:"coms2"}),s("SideButton",{staticClass:"coms5",attrs:{pois:t.pois,weather:t.weather},on:{SearchPois:t.SearchPois}}),s("Weather",{staticClass:"coms7",attrs:{weather:t.weather}})],1)},n=[],i=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"header"},[s("div",{staticClass:"border-wrapper"},[s("div",{staticClass:"border-item"},[s("span",{staticClass:"iconfont back-icon1"},[t._v("")]),s("input",{staticClass:"item",attrs:{type:"text",name:"username",placeholder:"搜索",id:"poiInput"}}),s("span",{staticClass:"iconfont back-icon2"},[t._v("")])])])])}],c={name:"HomeHeader"},l=c,r=(s("3f2f"),s("2877")),p=Object(r["a"])(l,i,o,!1,null,"2b8333e6",null),u=p.exports,d=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"container"}})},h=[],m=(s("7f7f"),s("1bab")),f=s("f564"),w={name:"RealHomeMap",data:function(){return{map:void 0,geolocation:void 0,placeSearch:void 0,weather:void 0,lng:0,lat:0,city:"北京",adcode:1100,poiList:null,pois_show:null,poiRecommend:[],markerList:[],markerInfo:""}},created:function(){},mounted:function(){this.mapInit(),Object(f["a"])({type:"primary",message:"推荐您前往这些地方",duration:8e3}),this.geolocation.watchPosition()},beforeUpdate:function(){console.log("map beforeUpdate"),console.log(this.map)},methods:{mapInit:function(){var t="https://webapi.amap.com/maps?v=1.4.15&key=2fdef7e86c76d6b26dfafaf389855ac4&callback=init",a=document.createElement("script");a.charset="utf-8",a.src=t,document.head.appendChild(a);var s=this;window.init=function(){var t=new AMap.Map("container",{center:[120.13796,30.24388],zoom:15,scrollWheel:!0,resizeEnable:!0,mapStyle:"amap://styles/whitesmoke"});AMap.plugin(["AMap.ToolBar"],(function(){t.addControl(new AMap.ToolBar({offset:new AMap.Pixel(9,175),liteStyle:!0}))})),AMap.plugin("AMap.Geolocation",(function(){var a=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"RB",buttonOffset:new AMap.Pixel(13,200),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0,extensions:"all"});function e(t){s.map.remove(s.markerList),console.log("定位信息"),console.log(t),s.lng=t["position"]["lng"],s.lat=t["position"]["lat"],s.adcode=t["addressComponent"]["adcode"],s.poiList=t["pois"],s.poiRecommend=t["pois"],s.addRecommendPoisToMap(),s.getWeather(),console.log(s.lng+" "+s.lat)}function n(t){}t.addControl(a),s.geolocation=a,a.watchPosition(),AMap.event.addListener(a,"complete",e),AMap.event.addListener(a,"error",n)})),AMap.plugin(["AMap.PlaceSearch"],(function(){s.placeSearch=new AMap.PlaceSearch({type:"",pageSize:30,pageIndex:1,map:t,panel:"panel",autoFitView:!0})})),AMap.plugin("AMap.Weather",(function(){s.weather=new AMap.Weather})),AMap.plugin("AMap.Autocomplete",(function(){var t={input:"poiInput"};new AMap.Autocomplete(t)})),s.map=t}},SearchPois:function(){var t=[this.lng,this.lat],a=this;this.placeSearch.searchNearBy("",t,200,(function(t,s){console.log("周边POI"),console.log(t,s),console.log("searchNearBy",a.poiRecommend),a.addRecommendPoisToMap(),a.FilterDakaInfo(),a.$emit("showPois",a.pois_show)}))},FilterDakaInfo:function(){this.pois_show=new Array;for(var t=0;t<this.poiList.length;t++){var a={lat:this.poiList[t]["location"]["lat"],lng:this.poiList[t]["location"]["lng"],name:this.poiList[t]["name"],type:this.poiList[t]["type"]};this.pois_show.push(a)}console.log(this.pois_show)},getWeather:function(){var t=this;this.weather.getLive(this.adcode,(function(a,s){return console.log("天气信息"),console.log(a,s),t.$emit("showWeather",s),t.$emit("sendWeather"),s}))},addRecommendPoisToMap:function(){var t=this;console.log("addRecommendPoisToMap",this.poiRecommend),this.map.remove(this.markerList),this.markerList=[];for(var a=0;a<5;a++){var s=new AMap.Marker({position:new AMap.LngLat(this.poiRecommend[a].location.lng,this.poiRecommend[a].location.lat),offset:new AMap.Pixel(-13,-30),clickable:!0,bubble:!0});s.setAnimation("AMAP_ANIMATION_BOUNCE"),s.setLabel({offset:new AMap.Pixel(5,0),content:"<div class='info'>"+this.poiRecommend[a].name+"</div>",direction:"right"}),this.markerList.push(s)}this.map.add(this.markerList),this.map.setFitView();for(var e=function(a){var s=t;window.setTimeout((function(){s.markerList[a].setAnimation("AMAP_ANIMATION_NONE")}),3e3)},n=0;n<this.markerList.length;n++)e(n)}}},v=w,g=(s("a5d8"),Object(r["a"])(v,d,h,!1,null,null,null)),C=g.exports,_=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"side"},[s("van-popup",{style:{height:"70%",width:"90%"},attrs:{round:"",position:"right","get-container":"body"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[s("van-cell",{staticClass:"popupheadline",attrs:{title:"请选择打卡地点",size:"large"}}),s("van-cell-group",t._l(t.pois,(function(a,e,n){return s("van-cell",{attrs:{clickable:"",title:a.name,size:"large"},on:{click:function(a){return t.daka(e)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-rate",{model:{value:t.rate[e],callback:function(a){t.$set(t.rate,e,a)},expression:"rate[key]"}})]},proxy:!0}],null,!0)})})),1)],1),s("div",{staticClass:"icon",attrs:{"is-link":""},on:{click:t.showPopup}},[s("i",{staticClass:"iconfont icon-add"})]),t._m(0),t._m(1)],1)},b=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"icon"},[s("i",{staticClass:"iconfont icon-mail"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"icon"},[s("i",{staticClass:"iconfont icon-tel"},[t._v("")])])}],A=(s("6b54"),{"晴":"00","少云":"01","晴间多云":"02","多云":"03","阴":"04","有风":"05","平静":"06","微风":"07","和风":"08","清风":"09","强风/劲风":"10","疾风":"11","大风":"12","烈风":"13","风暴":"14","狂爆风":"15","飓风":"16","热带风暴":"17","霾":"18","中度霾":"19","重度霾":"20","严重霾":"21","阵雨":"22","雷阵雨":"23","雷阵雨并伴有冰雹":"24","小雨":"25","中雨":"26","大雨":"27","暴雨":"28","大暴雨":"29","特大暴雨":"30","强阵雨":"31","强雷阵雨":"32","极端降雨":"33","毛毛雨/细雨":"34","雨":"35","小雨-中雨":"36","中雨-大雨":"37","大雨-暴雨":"38","暴雨-大暴雨":"39","大暴雨-特大暴雨":"40","雨雪天气":"41","雨夹雪":"42","阵雨夹雪":"43","冻雨":"44","雪":"45","阵雪":"46","小雪":"47","中雪":"48","大雪":"49","暴雪":"50","小雪-中雪":"51","中雪-大雪":"52","大雪-暴雪":"53","浮尘":"54","扬沙":"55","沙尘暴":"56","强沙尘暴":"57","龙卷风":"58","雾":"59","浓雾":"60","强浓雾":"61","轻雾":"62","大雾":"63","特强浓雾":"64","热":"65","冷":"66","未知":"67"}),y={"无风向":"0","东北":"1","东":"2","东南":"3","南":"4","西南":"5","西":"6","西北":"7","北":"8","旋转不定":"9"},M={name:"SideButton",data:function(){return{show:!1,rate:[]}},props:{pois:{default:{}},weather:{default:{city:"",weather:"",temperature:""}}},created:function(){},methods:{showPopup:function(){this.show=!0,this.$emit("SearchPois");for(var t=0;t<30;t++)this.rate.push(0)},transferWeather:function(t){var a=A[this.weather["weather"]],s="",e="",n=y[this.weather["windDirection"]];s=this.weather["temperature"]<0?(1100-this.weather["temperature"]).toString().substr(1,3):(1e3+this.weather["temperature"]).toString().substr(1,3),e="≤3"===this.weather["windPower"]?"03":(100+this.weather["windPower"]).toString().substr(1,2);var i=a+s+e+n;return console.log("天气代码："+i),i},daka:function(t){var a=this,s={longitude:this.pois[t]["lng"],latitude:this.pois[t]["lat"],poiName:this.pois[t]["name"],poiType:this.pois[t]["type"],weatherCode:this.transferWeather(this.weather)};Object(m["b"])({url:"/TravelApp3/DoMarkPOI",method:"post",header:{"Content-Type":"text/plain"},params:s},(function(t){console.log("发送打卡！"),console.log(t),a.$toast.success("打卡成功！")}),(function(t){console.log(t),a.$toast.fail("打卡失败！")}))}}},k=M,P=(s("4519"),Object(r["a"])(k,_,b,!1,null,null,null)),S=P.exports,L=s("4af9"),x=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"weather"},[t._v(t._s(t.weather.city)+" "+t._s(t.weather.weather)+" "+t._s(t.weather.temperature))])])},R=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"main"},[s("div",{staticClass:"sun"},[s("span",{staticStyle:{"--i":"1"}}),s("span",{staticStyle:{"--i":"2"}}),s("span",{staticStyle:{"--i":"3"}}),s("span",{staticStyle:{"--i":"4"}}),s("span",{staticStyle:{"--i":"5"}}),s("span",{staticStyle:{"--i":"6"}}),s("span",{staticStyle:{"--i":"7"}}),s("span",{staticStyle:{"--i":"8"}})]),s("div",{staticClass:"mountain a"}),s("div",{staticClass:"mountain b"}),s("div",{staticClass:"mountain c"}),s("div",{staticClass:"mountain d"}),s("div",{staticClass:"mountain e"}),s("div",{staticClass:"cloud_wind_wrap_fast"},[s("div",{staticClass:"cloud_wind_wrap_slow"},[s("div",{staticClass:"cloud_wind_group",staticStyle:{"--i":"1"}},[s("div",{staticClass:"cloud a"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"cloud b"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"cloud c"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind a"},[s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind b"},[s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind_small"},[s("span"),s("span"),s("span"),s("span"),s("span"),s("span"),s("span"),s("span")])]),s("div",{staticClass:"cloud_wind_group",staticStyle:{"--i":"2"}},[s("div",{staticClass:"cloud a"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"cloud b"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"cloud c"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind a"},[s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind b"},[s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind_small"},[s("span"),s("span"),s("span"),s("span"),s("span"),s("span"),s("span"),s("span")])]),s("div",{staticClass:"cloud_wind_group",staticStyle:{"--i":"3"}},[s("div",{staticClass:"cloud a"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"cloud b"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"cloud c"},[s("span"),s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind a"},[s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind b"},[s("span"),s("span"),s("span"),s("span")]),s("div",{staticClass:"wind_small"},[s("span"),s("span"),s("span"),s("span"),s("span"),s("span"),s("span"),s("span")])])])])])}],$={name:"Weather",props:{weather:{default:{city:"",weather:"",temperature:""}}}},W=$,I=(s("6aef"),Object(r["a"])(W,x,R,!1,null,null,null)),O=I.exports,T={name:"RealHomePage",data:function(){return{pois:null,weather:null}},components:{RealHomeMap:C,HomeHeader:u,SideButton:S,BottomBar:L["a"],Weather:O},methods:{SearchPois:function(t){this.$refs.RHM.SearchPois()},showPois:function(t){this.pois=t},showWeather:function(t){this.weather=t}}},E=T,B=(s("93bd"),Object(r["a"])(E,e,n,!1,null,null,null));a["default"]=B.exports},cc21:function(t,a,s){}}]);
//# sourceMappingURL=chunk-4ec5cca0.4acda1dc.js.map